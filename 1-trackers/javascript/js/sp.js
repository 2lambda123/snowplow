/*
 * SnowPlow - The world's most powerful web analytics platform
 *
 * @description JavaScript tracking client for SnowPlow
 * @version 0.4
 * @author Alex Dean, Anthon Pang
 */
if(!this.JSON2){this.JSON2={}}(function(){function d(f){return f<10?"0"+f:f}function l(n,m){var f=Object.prototype.toString.apply(n);if(f==="[object Date]"){return isFinite(n.valueOf())?n.getUTCFullYear()+"-"+d(n.getUTCMonth()+1)+"-"+d(n.getUTCDate())+"T"+d(n.getUTCHours())+":"+d(n.getUTCMinutes())+":"+d(n.getUTCSeconds())+"Z":null}if(f==="[object String]"||f==="[object Number]"||f==="[object Boolean]"){return n.valueOf()}if(f!=="[object Array]"&&typeof n.toJSON==="function"){return n.toJSON(m)}return n}var c=new RegExp("[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]","g"),e='\\\\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]',i=new RegExp("["+e,"g"),j,b,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;
function a(f){i.lastIndex=0;return i.test(f)?'"'+f.replace(i,function(m){var n=k[m];return typeof n==="string"?n:"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function g(s,p){var n,m,t,f,q=j,o,r=p[s];if(r&&typeof r==="object"){r=l(r,s)}if(typeof h==="function"){r=h.call(p,s,r)}switch(typeof r){case"string":return a(r);case"number":return isFinite(r)?String(r):"null";case"boolean":case"null":return String(r);case"object":if(!r){return"null"}j+=b;o=[];if(Object.prototype.toString.apply(r)==="[object Array]"){f=r.length;for(n=0;n<f;n+=1){o[n]=g(n,r)||"null"}t=o.length===0?"[]":j?"[\n"+j+o.join(",\n"+j)+"\n"+q+"]":"["+o.join(",")+"]";j=q;return t}if(h&&typeof h==="object"){f=h.length;for(n=0;n<f;n+=1){if(typeof h[n]==="string"){m=h[n];t=g(m,r);if(t){o.push(a(m)+(j?": ":":")+t)}}}}else{for(m in r){if(Object.prototype.hasOwnProperty.call(r,m)){t=g(m,r);if(t){o.push(a(m)+(j?": ":":")+t)}}}}t=o.length===0?"{}":j?"{\n"+j+o.join(",\n"+j)+"\n"+q+"}":"{"+o.join(",")+"}";j=q;
return t}}if(typeof JSON2.stringify!=="function"){JSON2.stringify=function(o,m,n){var f;j="";b="";if(typeof n==="number"){for(f=0;f<n;f+=1){b+=" "}}else{if(typeof n==="string"){b=n}}h=m;if(m&&typeof m!=="function"&&(typeof m!=="object"||typeof m.length!=="number")){throw new Error("JSON.stringify")}return g("",{"":o})}}if(typeof JSON2.parse!=="function"){JSON2.parse=function(o,f){var n;function m(s,r){var q,p,t=s[r];if(t&&typeof t==="object"){for(q in t){if(Object.prototype.hasOwnProperty.call(t,q)){p=m(t,q);if(p!==undefined){t[q]=p}else{delete t[q]}}}}return f.call(s,r,t)}o=String(o);c.lastIndex=0;if(c.test(o)){o=o.replace(c,function(p){return"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)})}if((new RegExp("^[\\],:{}\\s]*$")).test(o.replace(new RegExp('\\\\(?:["\\\\/bfnrt]|u[0-9a-fA-F]{4})',"g"),"@").replace(new RegExp('"[^"\\\\\n\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?',"g"),"]").replace(new RegExp("(?:^|:|,)(?:\\s*\\[)+","g"),""))){n=eval("("+o+")");
return typeof f==="function"?m({"":n},""):n}throw new SyntaxError("JSON.parse")}}}());var _snaq=_snaq||[],SnowPlow=SnowPlow||(function(){var f,a={},p=document,c=navigator,A=screen,x=window,m=false,v=[],h=x.encodeURIComponent,w=x.decodeURIComponent,d=unescape,B,D;function r(i){return typeof i!=="undefined"}function n(i){return typeof i==="function"}function z(i){return typeof i==="object"}function j(i){return typeof i==="string"||i instanceof String}function G(){var L,N,M;for(L=0;L<arguments.length;L+=1){M=arguments[L];N=M.shift();if(j(N)){B[N].apply(B,M)}else{N.apply(B,M)}}}function J(N,M,L,i){if(N.addEventListener){N.addEventListener(M,L,i);return true}if(N.attachEvent){return N.attachEvent("on"+M,L)}N["on"+M]=L}function E(M,P){var L="",O,N;for(O in a){if(Object.prototype.hasOwnProperty.call(a,O)){N=a[O][M];if(n(N)){L+=N(P)}}}return L}function H(){var i;E("unload");if(f){do{i=new Date()}while(i.getTimeAlias()<f)}}function F(){var L;if(!m){m=true;E("load");for(L=0;L<v.length;L++){v[L]()
}}return true}function k(){var L;if(p.addEventListener){J(p,"DOMContentLoaded",function i(){p.removeEventListener("DOMContentLoaded",i,false);F()})}else{if(p.attachEvent){p.attachEvent("onreadystatechange",function i(){if(p.readyState==="complete"){p.detachEvent("onreadystatechange",i);F()}});if(p.documentElement.doScroll&&x===x.top){(function i(){if(!m){try{p.documentElement.doScroll("left")}catch(M){setTimeout(i,0);return}F()}}())}}}if((new RegExp("WebKit")).test(c.userAgent)){L=setInterval(function(){if(m||/loaded|complete/.test(p.readyState)){clearInterval(L);F()}},10)}J(x,"load",F,false)}function s(){var i="";try{i=x.top.document.referrer}catch(M){if(x.parent){try{i=x.parent.document.referrer}catch(L){i=""}}}if(i===""){i=p.referrer}return i}function g(i){var M=new RegExp("^([a-z]+):"),L=M.exec(i);return L?L[1]:null}function b(i){var M=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)"),L=M.exec(i);return L?L[1]:i}function y(M,L){var P=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+)[?])([^#]+)"),O=P.exec(M),N=new RegExp("(?:^|&)"+L+"=([^&]*)"),i=O?N.exec(O[1]):0;
return i?w(i[1]):""}function l(Q,N,M,P,L,O){var i;if(M){i=new Date();i.setTime(i.getTime()+M)}p.cookie=Q+"="+h(N)+(M?";expires="+i.toGMTString():"")+";path="+(P||"/")+(L?";domain="+L:"")+(O?";secure":"")}function e(M){var i=new RegExp("(^|;)[ ]*"+M+"=([^;]*)"),L=i.exec(p.cookie);return L?w(L[2]):0}function o(i){return d(h(i))}function I(ab){var N=function(W,i){return(W<<i)|(W>>>(32-i))},ac=function(ai){var ah="",ag,W;for(ag=7;ag>=0;ag--){W=(ai>>>(ag*4))&15;ah+=W.toString(16)}return ah},Q,ae,ad,M=[],U=1732584193,S=4023233417,R=2562383102,P=271733878,O=3285377520,aa,Z,Y,X,V,af,L,T=[];ab=o(ab);L=ab.length;for(ae=0;ae<L-3;ae+=4){ad=ab.charCodeAt(ae)<<24|ab.charCodeAt(ae+1)<<16|ab.charCodeAt(ae+2)<<8|ab.charCodeAt(ae+3);T.push(ad)}switch(L&3){case 0:ae=2147483648;break;case 1:ae=ab.charCodeAt(L-1)<<24|8388608;break;case 2:ae=ab.charCodeAt(L-2)<<24|ab.charCodeAt(L-1)<<16|32768;break;case 3:ae=ab.charCodeAt(L-3)<<24|ab.charCodeAt(L-2)<<16|ab.charCodeAt(L-1)<<8|128;break}T.push(ae);while((T.length&15)!==14){T.push(0)
}T.push(L>>>29);T.push((L<<3)&4294967295);for(Q=0;Q<T.length;Q+=16){for(ae=0;ae<16;ae++){M[ae]=T[Q+ae]}for(ae=16;ae<=79;ae++){M[ae]=N(M[ae-3]^M[ae-8]^M[ae-14]^M[ae-16],1)}aa=U;Z=S;Y=R;X=P;V=O;for(ae=0;ae<=19;ae++){af=(N(aa,5)+((Z&Y)|(~Z&X))+V+M[ae]+1518500249)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}for(ae=20;ae<=39;ae++){af=(N(aa,5)+(Z^Y^X)+V+M[ae]+1859775393)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}for(ae=40;ae<=59;ae++){af=(N(aa,5)+((Z&Y)|(Z&X)|(Y&X))+V+M[ae]+2400959708)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}for(ae=60;ae<=79;ae++){af=(N(aa,5)+(Z^Y^X)+V+M[ae]+3395469782)&4294967295;V=X;X=Y;Y=N(Z,30);Z=aa;aa=af}U=(U+aa)&4294967295;S=(S+Z)&4294967295;R=(R+Y)&4294967295;P=(P+X)&4294967295;O=(O+V)&4294967295}af=ac(U)+ac(S)+ac(R)+ac(P)+ac(O);return af.toLowerCase()}function C(M,i,L){if(M==="translate.googleusercontent.com"){if(L===""){L=i}i=y(i,"u");M=b(i)}else{if(M==="cc.bingj.com"||M==="webcache.googleusercontent.com"||M.slice(0,5)==="74.6."){i=p.links[0].href;M=b(i)}}return[M,i,L]}function t(L){var i=L.length;
if(L.charAt(--i)==="."){L=L.slice(0,i)}if(L.slice(0,2)==="*."){L=L.slice(1)}return L}function K(L){if(!j(L)){L=L.text||"";var i=p.getElementsByTagName("title");if(i&&r(i[0])){L=i[0].text}}return L}function u(aq){var au=C(p.domain,x.location.href,s()),ab=t(au[0]),aa=au[1],aK=au[2],P="GET",af=N(aq),a0="",aS,aZ=p.title,al="7z|aac|ar[cj]|as[fx]|avi|bin|csv|deb|dmg|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|ms[ip]|od[bfgpst]|og[gv]|pdf|phps|png|ppt|qtm?|ra[mr]?|rpm|sea|sit|tar|t?bz2?|tgz|torrent|txt|wav|wm[av]|wpd||xls|xml|z|zip",aL=[ab],T=[],aM=[],aP=[],ae=500,O,ao,ar,aN="_sp_",X,aI,Q,ax,a1=63072000000,ai=1800000,ad=15768000000,V=window.navigator.userLanguage||window.navigator.language,aX=p.location.protocol==="https",aw={},aC=false,Y=false,ac,aV,az,aR=I,aH,an,aA;function aE(){return{transaction:{},items:[]}}function aT(a2){var a3;if(ar){a3=new RegExp("#.*");return a2.replace(a3,"")}return a2}function ak(a4,a2){var a5=g(a2),a3;if(a5){return a2}if(a2.slice(0,1)==="/"){return g(a4)+"://"+b(a4)+a2
}a4=aT(a4);if((a3=a4.indexOf("?"))>=0){a4=a4.slice(0,a3)}if((a3=a4.lastIndexOf("/"))!==a4.length-1){a4=a4.slice(0,a3+1)}return a4+a2}function aB(a5){var a3,a2,a4;for(a3=0;a3<aL.length;a3++){a2=t(aL[a3].toLowerCase());if(a5===a2){return true}if(a2.slice(0,1)==="."){if(a5===a2.slice(1)){return true}a4=a5.length-a2.length;if((a4>0)&&(a5.slice(a4)===a2)){return true}}}return false}function i(a2){var a3=new Image(1,1);a3.onload=function(){};a3.src=af+(af.indexOf("?")<0?"?":"&")+a2}function aU(a4,a3){var a2=new Date();if(!Q){i(a4);f=a2.getTime()+a3}}function U(a2){return aN+a2+"."+a0+"."+aH}function aF(){var a2=U("testcookie");if(!r(c.cookieEnabled)){l(a2,"1");return e(a2)==="1"?"1":"0"}return c.cookieEnabled?"1":"0"}function am(){aH=aR((X||ab)+(aI||"/")).slice(0,4)}function W(){var a2=new Date();ac=a2.getTime()}function R(a6,a3,a2,a5,a4){l(U("id"),a6+"."+a3+"."+a2+"."+a5+"."+a4,a1,aI,X,aX)}function S(){var a3=new Date(),a2=Math.round(a3.getTime()/1000),a5=e(U("id")),a4;if(a5){a4=a5.split(".");
a4.unshift("0")}else{if(!an){an=aR((c.userAgent||"")+(c.platform||"")+JSON2.stringify(aw)+a2).slice(0,16)}a4=["1",an,a2,0,a2,""]}return a4}function av(a3,bk){var bi,a2=new Date(),a8=Math.round(a2.getTime()/1000),bm,bj,a5,be,bg,a7,a6,bh,a4=1024,bn,ba,bd=U("id"),a9=U("ses"),bf=S(),bc=e(a9),bl=aS||aa,bb;if(Q){l(bd,"",-1,aI,X);l(a9,"",-1,aI,X);return""}bm=bf[0];bj=bf[1];be=bf[2];a5=bf[3];bg=bf[4];a7=bf[5];if(!bc){a5++;a7=bg}a3+="&tid="+String(Math.random()).slice(2,8)+"&uid="+bj+"&vid="+a5+"&lang="+V+(aK.length?"&refr="+h(aT(aK)):"");for(bi in aw){if(Object.prototype.hasOwnProperty.call(aw,bi)){bb=(bi==="res"||bi==="cookie")?"&":"&f_";a3+=bb+bi+"="+aw[bi]}}a3+="&url="+h(aT(window.location));R(bj,be,a5,a8,a7);l(a9,"*",ai,aI,X,aX);a3+=E(bk);return a3}function N(a2){return("https:"==document.location.protocol?"https":"http")+"://"+a2+".cloudfront.net/ice.png"}function aG(a4,a7,a2,a6,a5){var a3="&ev_ca="+h(a4)+"&ev_ac="+h(a7);if(String(a2).length){a3+="&ev_la="+h(a2)}if(String(a6).length){a3+="&ev_pr="+h(a6)
}if(String(a5).length){a3+="&ev_va="+h(a5)}a3=av(a3,"event");aU(a3,ae)}function ap(a6,a2,a4,a3){var a5="";a5+="&ad_ba="+h(a6);if(String(a2).length){a5+="&ad_ca="+h(a2)}if(String(a4).length){a5+="&ad_ad="+h(a4)}if(String(a3).length){a5+="&ad_uid="+h(a3)}a5=av(a5,configCustomData,"adimp");aU(a5,ae)}function aW(a2){var a3=a2||"";return{add:function(a4,a5){if(a5!==undefined&&a5!==""){a3+="&"+a4+"="+h(a5)}},build:function(){return a3}}}function aJ(a6,a5,bc,a7,a2,ba,a3,a4){var bb=aW();bb.add("tr_id",a6);bb.add("tr_af",a5);bb.add("tr_tt",bc);bb.add("tr_tx",a7);bb.add("tr_sh",a2);bb.add("tr_ci",ba);bb.add("tr_st",a3);bb.add("tr_co",a4);var a8=bb.build();var a9=av(a8,"ecommerceTransaction");aU(a9,ae)}function M(a4,a9,a2,a3,a8,a6){var ba=aW();ba.add("ti_id",a4);ba.add("ti_sk",a9);ba.add("ti_na",a2);ba.add("ti_ca",a3);ba.add("ti_pr",a8);ba.add("ti_qu",a6);var a5=ba.build();var a7=av(a5,"ecommerceTransactionItem");aU(a7,ae)}function L(a5){var a2=new Date(),a4=av("page="+h(K(a5||aZ)),"log");aU(a4,ae);
if(O&&ao&&!Y){Y=true;J(p,"click",W);J(p,"mouseup",W);J(p,"mousedown",W);J(p,"mousemove",W);J(p,"mousewheel",W);J(x,"DOMMouseScroll",W);J(x,"scroll",W);J(p,"keypress",W);J(p,"keydown",W);J(p,"keyup",W);J(x,"resize",W);J(x,"focus",W);J(x,"blur",W);ac=a2.getTime();setTimeout(function a3(){var a6=new Date(),a7;if((ac+ao)>a6.getTime()){if(O<a6.getTime()){a7=av("ping=1","ping");aU(a7,ae)}setTimeout(a3,ao)}},ao)}}function aj(a3,a2){var a4=av(a2+"="+h(aT(a3)),"link");aU(a4,ae)}function aO(a3,a2){if(a3!==""){return a3+a2.charAt(0).toUpperCase()+a2.slice(1)}return a2}function at(a7){var a6,a2,a5=["","webkit","ms","moz"],a4;if(!ax){for(a2=0;a2<a5.length;a2++){a4=a5[a2];if(Object.prototype.hasOwnProperty.call(p,aO(a4,"hidden"))){if(p[aO(a4,"visibilityState")]==="prerender"){a6=true}break}}}if(a6){J(p,a4+"visibilitychange",function a3(){p.removeEventListener(a4+"visibilitychange",a3,false);a7()});return}a7()}function aD(a4,a3){var a5,a2="(^| )(piwik[_-]"+a3;if(a4){for(a5=0;a5<a4.length;a5++){a2+="|"+a4[a5]
}}a2+=")( |$)";return new RegExp(a2)}function aY(a5,a2,a6){if(!a6){return"link"}var a4=aD(aM,"download"),a3=aD(aP,"link"),a7=new RegExp("\\.("+al+")([?&#]|$)","i");return a3.test(a5)?"link":(a4.test(a5)||a7.test(a2)?"download":0)}function Z(a7){var a5,a3,a2;while((a5=a7.parentNode)!==null&&r(a5)&&((a3=a7.tagName.toUpperCase())!=="A"&&a3!=="AREA")){a7=a5}if(r(a7.href)){var a8=a7.hostname||b(a7.href),a9=a8.toLowerCase(),a4=a7.href.replace(a8,a9),a6=new RegExp("^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):","i");if(!a6.test(a4)){a2=aY(a7.className,a4,aB(a9));if(a2){a4=d(a4);aj(a4,a2)}}}}function ag(a2){var a3,a4;a2=a2||x.event;a3=a2.which||a2.button;a4=a2.target||a2.srcElement;if(a2.type==="click"){if(a4){Z(a4)}}else{if(a2.type==="mousedown"){if((a3===1||a3===2)&&a4){aV=a3;az=a4}else{aV=az=null}}else{if(a2.type==="mouseup"){if(a3===aV&&a4===az){Z(a4)}aV=az=null}}}}function aQ(a3,a2){if(a2){J(a3,"mouseup",ag,false);J(a3,"mousedown",ag,false)}else{J(a3,"click",ag,false)}}function ay(a3){if(!aC){aC=true;
var a4,a2=aD(T,"ignore"),a5=p.links;if(a5){for(a4=0;a4<a5.length;a4++){if(!a2.test(a5[a4].className)){aQ(a5[a4],a3)}}}}}function ah(){var a2,a3,a4={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"};if(c.mimeTypes&&c.mimeTypes.length){for(a2 in a4){if(Object.prototype.hasOwnProperty.call(a4,a2)){a3=c.mimeTypes[a4[a2]];aw[a2]=(a3&&a3.enabledPlugin)?"1":"0"}}}if(typeof navigator.javaEnabled!=="unknown"&&r(c.javaEnabled)&&c.javaEnabled()){aw.java="1"}if(n(x.GearsFactory)){aw.gears="1"}aw.res=A.width+"x"+A.height;aw.cookie=aF()}ah();am();aA=aE();return{getVisitorId:function(){return(S())[1]},getVisitorInfo:function(){return S()},setTrackerUrl:function(a2){af=a2},setSiteId:function(a2){a0=a2},setLinkTrackingTimer:function(a2){ae=a2},setDownloadExtensions:function(a2){al=a2},addDownloadExtensions:function(a2){al+="|"+a2
},setDomains:function(a2){aL=j(a2)?[a2]:a2;aL.push(ab)},setIgnoreClasses:function(a2){T=j(a2)?[a2]:a2},setReferrerUrl:function(a2){aK=a2},setCustomUrl:function(a2){aS=ak(aa,a2)},setDocumentTitle:function(a2){aZ=a2},setDownloadClasses:function(a2){aM=j(a2)?[a2]:a2},setLinkClasses:function(a2){aP=j(a2)?[a2]:a2},discardHashTag:function(a2){ar=a2},setCookieNamePrefix:function(a2){aN=a2},setCookieDomain:function(a2){X=t(a2);am()},setCookiePath:function(a2){aI=a2;am()},setVisitorCookieTimeout:function(a2){a1=a2*1000},setSessionCookieTimeout:function(a2){ai=a2*1000},setReferralCookieTimeout:function(a2){ad=a2*1000},setDoNotTrack:function(a3){var a2=c.doNotTrack||c.msDoNotTrack;Q=a3&&(a2==="yes"||a2==="1")},addListener:function(a3,a2){aQ(a3,a2)},enableLinkTracking:function(a2){if(m){ay(a2)}else{v.push(function(){ay(a2)})}},setHeartBeatTimer:function(a4,a3){var a2=new Date();O=a2.getTime()+a4*1000;ao=a3*1000},killFrame:function(){if(x.location!==x.top.location){x.top.location=x.location}},redirectFile:function(a2){if(x.location.protocol==="file:"){x.location=a2
}},setCountPreRendered:function(a2){ax=a2},trackLink:function(a3,a2){at(function(){aj(a3,a2)})},trackPageView:function(a2){at(function(){L(a2)})},setAccount:function(a2){af=N(a2)},trackEvent:function(a3,a6,a2,a5,a4){aG(a3,a6,a2,a5,a4)},trackImpression:function(a5,a2,a4,a3){ap(a5,a2,a4,a3)},addTrans:function(a2,a5,a6,a4,a3,a9,a7,a8){aA.transaction={orderId:a2,affiliation:a5,total:a6,tax:a4,shipping:a3,city:a9,state:a7,country:a8}},addItem:function(a2,a7,a3,a5,a4,a6){aA.items.push({orderId:a2,sku:a7,name:a3,category:a5,price:a4,quantity:a6})},trackTrans:function(){aJ(aA.transaction.orderId,aA.transaction.affiliation,aA.transaction.total,aA.transaction.tax,aA.transaction.shipping,aA.transaction.city,aA.transaction.state,aA.transaction.country);aA.items.forEach(function(a2){M(a2.orderId,a2.sku,a2.name,a2.category,a2.price,a2.quantity)});aA=aE()}}}function q(){return{push:G}}J(x,"beforeunload",H,false);k();Date.prototype.getTimeAlias=Date.prototype.getTime;B=new u();for(D=0;D<_snaq.length;D++){G(_snaq[D])
}_snaq=new q();return{addPlugin:function(i,L){a[i]=L},getTracker:function(i){return new u(i)},getAsyncTracker:function(){return B}}}());